# DAD-220-Intro Structured Databases
## Structured Database Environments-Databases-SQL-Relational Models-Inner and Outer Joins

### Summarize the project and what problem it was solving?
Data is information that has value. Information is data that has been processed to give meaning. Data collection is most valuable when stored in formats that include text, image, audio, and video files. Data sources are generated by various industries, governments, organizations, and more. The artifact originates from course DAD220 Intro to Structured Databases and uses MySQL to perform CRUD actions. The goal of this artifact is to showcase how a software engineer uses existing information to formulate a new database and extracts usable data to generate an accurate report based on any findings and analysis. Once the data is imported, the information is used to provide the client with a report identifying sales to better manage the equipment distributed to customers and any returns or defects.

* The enhancement plan includes updates to improve the efficiency of the artifact by incorporating advanced concepts of MySQL and using proper syntax. Datamining will take place by preparing the database to import multiple CSV files. The data will then have attributes linked to then be extracted and sorted by specific parameters to identify frequencies for overall sales. Performing the planned improvements provides the ability to achieve the desired outcome to import raw data that can be filtered, sorted, and linked according to tables and the variables they may share.
 
* I plan to edit the CSV files and find areas to enhance the functionality of the reports for the project. While improving code by checking for code clarity, consistency, design, features, and coding standard use. I also plan to create a ReadMe.txt file and review naming conventions for readability in database tables, attributes, and variables.

I selected this artifact as I believe by using sources of data formatted in Comma-Separated Values provides a simple form to create a useful database. Once the data is selected, within SQL the database must be created, then the tables associated with the source file are created. The data is then imported into the SQL database and the attributes necessary to link the rows of data help to connect the relationships between each table. For this artifact, I chose to add data from the https://www.oe.netl.doe.gov/OE417_annual_summary.aspx. Here I was able to locate a CSV file that listed the climate zones for each city and state. This information will be added to the database and linked to the customer profile to determine if any relationships to climate zone relate to purchase items and or returns or defects.

List of Enhancements performed
1. Add new content to Database - added resource of climate to database for each state found at https://www.energy.gov/eere/buildings/downloads/zerh-tour-zero-homepage-data-table-datafile-1012019 
2. Cleaned data within the csv files: From customers, removed (-) from phone numbers, 98868 updates were applied.
3. Pseudocode descriptions or UML Charts and layout structure have been updated to align with the program functionality.
4. Verified formatting, date, spacing, tabs, line breaks, curly braces, and brackets.
5. Reviewed considerations of whitespace, removing unnecessary spacing.
6. Ensured naming conventions of fields/constants/variables/parameters/classes/libraries clear and meaningful.
7. Ensure Project Requirements are fulfilled and improvments support quality, efficiency, and security.
8. Create ReadMe file and include project outcome and steps.


### Resources
https://www.mysqltutorial.org/import-csv-file-mysql-table/
https://www.oe.netl.doe.gov/OE417_annual_summary.aspx
https://www.energy.gov/eere/buildings/downloads/zerh-tour-zero-homepage-data-table-datafile-1012019


**// Part 1**
From Codio Select Terminal and enter ``mysql;`` // this provides access to the server


**//Part 2**
![Picture1](https://user-images.githubusercontent.com/79305154/152242549-290ff09c-2bc5-4cfc-a7a5-8410ba6d50f2.png)
``SHOW DATABASES;`` // perform this action to show a list of all databases


**// Part 3**
``CREATE DATABASE Capstone22;`` // perform this action to create a new database, name the database as desired


**//Part 4**
``USE Capstone22;``	// perform this action to select the database for CRUD actions


**//Part 5**
// create Customers table and fields

``CREATE TABLE Customers (
  CustomerID INT,
  FirstName VARCHAR(25),
  LastName VARCHAR(25),
  Street VARCHAR(50),
  City VARCHAR(50),
  State VARCHAR(25),
  Climate VARCHAR(25),
  ZipCode INT,
  Telephone VARCHAR(15),
  PRIMARY KEY(CustomerID)
);``

// create Orders table and fields

``CREATE TABLE Orders (
  OrderID INT,
  CustomerID INT,
  SKU VARCHAR(20),
  Description VARCHAR(50),
  PRIMARY KEY(OrderID)
);``

//create RMA table and fields

``CREATE TABLE RMA (
  RMAID INT,
  OrderID INT,
  Reason VARCHAR(25),
  Status VARCHAR(50),
  Step VARCHAR(15),
  PRIMARY KEY(RMAID)
);``

//create Climate table and fields

``CREATE TABLE Clstate (
  City VARCHAR(50),
  State VARCHAR(25),
  Climate VARCHAR(25)
);``

``ALTER TABLE Orders
  ADD FOREIGN KEY(CustomerID) REFERENCES Customers(CustomerID);		// link tables and thier rows to the CustomerID attribute``
  
``ALTER TABLE RMA
  ADD FOREIGN KEY(OrderID) REFERENCES Orders(OrderID);			// link tables and thier rows to the OrderID attribute``

![Picture2](https://user-images.githubusercontent.com/79305154/152242755-66f98cff-af35-40fb-8eed-7f0fb42a923e.png)

``SHOW TABLES;``      // shows tables created

![Picture3](https://user-images.githubusercontent.com/79305154/152242990-d5867631-8a23-412c-830a-3b5b4d01c2f0.png)

``DESCRIBE Customers;``   // list Customers table fields

![Picture4](https://user-images.githubusercontent.com/79305154/152242977-02a7d57c-d69a-4d76-a868-f6862f72e7d9.png)

``DESCRIBE Orders;``     // list Orders table fields

![Picture5](https://user-images.githubusercontent.com/79305154/152242965-e4257715-f145-4307-96cc-d36530ee3a4a.png)

``DESCRIBE RMA;``         // list RMA table fields

![Picture6](https://user-images.githubusercontent.com/79305154/152242937-59cf6f1e-720d-47a3-a933-5e6bc9755bcf.png)

``DESCRIBE Climate;``    // list Climate table fields


**// Part 6** 
``mkdir output``			// creates output folder
``sudo chown mysql:mysql output``	// links output when creating outfiles

// loads csv file into Capstone22 Database tables selected(Customers)	

``LOAD DATA INFILE '/home/codio/workspace/Capstone/customers.csv'
INTO TABLE Customers
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n';``						// prompted Query OK, 100000 rows affected (1.63 sec) if successful

// loads csv file into Capstone22 Database tables selected(Orders)

``LOAD DATA INFILE '/home/codio/workspace/Capstone/orders.csv'
INTO TABLE Orders
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n';``					// prompted Query OK, 100000 rows affected, 11089 warnings (1.78 sec)

// loads csv file into Capstone22 Database tables selected(RMA)

``LOAD DATA INFILE '/home/codio/workspace/Capstone/rma.csv'
INTO TABLE RMA
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n';``						// prompted Query OK, 100000 rows affected, 65535 warnings (1.67 sec)

// loads csv file into Capstone22 Database tables selected(Climate)

``LOAD DATA INFILE '/home/codio/workspace/Capstone/climate by state.csv'
INTO TABLE Clstate
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n';``						// prompted Query OK, 246 rows affected (0.01 sec)``


**// Part 7**

// test records for the state of Massachusetts limit ten

``SELECT COUNT(*)
  FROM Customers INNER JOIN Orders ON Customers.CustomerID = Orders.CustomerID
  WHERE UPPER(Customers.state) =    'MASSACHUSETTS';
SELECT * 
  FROM Customers INNER JOIN Orders ON Customers.CustomerID = Orders.CustomerID
  WHERE UPPER(Customers.state) = 'MASSACHUSETTS'
  ORDER BY Orders.CustomerID ASC
  Limit 10;``

//  output new csv report

``SELECT Orders.OrderID AS ORDERID, Orders.CustomerID AS CUSTOMERID, Orders.SKU AS SKU, LEFT(Orders.Description, 28) AS DESCRIPTION, RMA.RMAID AS RMAID, RMA.OrderID AS RMAOID, LEFT(RMA.Reason, 28) AS REASON, RMA.Step AS STEP
  FROM Orders INNER JOIN RMA ON Orders.OrderID = RMA.OrderID
  WHERE Orders.OrderID >= 0
  ORDER BY Orders.OrderID ASC
  INTO OUTFILE'/home/codio/workspace/output/Orders_ProjectOne.csv' FIELDS TERMINATED BY ',';``

// test new parameters for climate

``SELECT COUNT(*)
  FROM Customers INNER JOIN Orders ON Customers.CustomerID = Orders.CustomerID
  WHERE UPPERR(Customers.state) != 'NULL';
SELECT Orders.OrderID, Orders.CustomerID, Orders.SKU, Orders.Description, Customers.City, Customers.State, Customers.Climate, RMA.Reason, RMA.Status
  FROM Customers INNER JOIN Orders ON Customers.CustomerID = Orders.CustomerID 
  INNER JOIN RMA ON Orders.OrderID = RMA.OrderID
Limit 50;``
![Picture7](https://user-images.githubusercontent.com/79305154/152243187-e4da864c-2e59-4a0e-a42d-491c97ef0934.png)


**// Part 8**

// review the data 

Based on the findings, by adding an additional layer of demographics to showcase the climate of each state, the information indicates that a high volume of equipment returns has taken place from the state of Massachusetts. The purchase amount is at 4001, compared to roughly 2000 or less from other states. The climate data that was imported indicates that the state of Massachusetts is cold. This factor may have something to do with the high volume of returns for this state compared to all other states like California which is hot and dry most of the year. The results from the SQL commands ran against the Capstone22 database returned the totals of items purchased and returned for each state by SKU. In the United States, there have been nearly the same amount of returns for purchases. This confirms the high frequency of returns of products purchased. For example, the state of Wyoming purchased a total of 2,006 products and returned a total of 1,742 products. The difference from products not returned is 264 totals. The frequency of returned items for the state of Wyoming is 87 out of 100. The frequency for all items is 89 out of 100 and the frequency for each SKU is  ADV-24-10C 88.62, ADV-48-10F 88.61, BAS-08-1 C 88.75, BAS-24-1 C 86, BAS-48-1 C 88.34, ENT-24-10F 88.73, ENT-24-40F 87.68, ENT-48-10F 88.444, ENT-48-40F 88.35. The reports below show the findings for the remainder of each state and item.

The results from the data show that the product with the highest percentage of returns is the Enterprise Switch 10GigE SFP+ at 23%. The State that shows the highest percentage of returns is Vermont at 91%. Vermont currently shows a purchase total of 2,006 items and a return amount of 1,818. Although Massachusetts has the higher total purchase amount at 4,001, their percentage of returns is at 89%. Using Excel to compile the data extracted from the Capstone22 database generated the values discussed. The reports below show the findings for the remainder of each state and item.

![Picture8](https://user-images.githubusercontent.com/79305154/152251105-80355995-e35e-4558-95a9-de5b244803da.png)

![Picture9](https://user-images.githubusercontent.com/79305154/152251160-0e225fac-3331-4b60-bf00-c3894308fa97.png)

![Picture10](https://user-images.githubusercontent.com/79305154/152251187-2b1a2be6-795a-4cbb-8b0f-9eff676dc361.png)

The results provide the totals of items purchased and returned for each state by SKU. The reports generated show the frequencies and percentages for each state and each product. The frequency for each SKU is  ADV-24-10C 88.62, ADV-48-10F 88.61, BAS-08-1 C 88.75, BAS-24-1 C 86, BAS-48-1 C 88.34, ENT-24-10F 88.73, ENT-24-40F 87.68, ENT-48-10F 88.444, ENT-48-40F 88.35. The item with the highest percentage of returns is the Enterprise Switch 10GigE SFP+ at 23%. The State that shows the highest percentage of returns is Vermont at 91%. 

![Picture11](https://user-images.githubusercontent.com/79305154/152251232-03769296-4ac4-45b6-9bd1-3617e62d00a4.png)

![Picture12](https://user-images.githubusercontent.com/79305154/152251243-9d466f82-1553-449a-bfa3-b40ae284db5c.png)

![Picture13](https://user-images.githubusercontent.com/79305154/152251264-0bfcf915-933f-484a-8bd7-305f5bfeb29c.png)

Some of the issues found in the data relate to matching the descriptions to each SKU. Confirming the reason to the return of the item and if it was replaced with a different item. Confirming if the item was defective due to limits of the device or the needs of the customer demands. Identifying fraud, as the state of Massachusetts has double that of any other state. Lastly, there are no mentions to deliveries and or records to show if some of the returns were due to insufficient shipping methods.

The conclusions that have been presented are limited as they are viewed  only by the information presented. If I failed to generate the proper reports or if I failed to gather the proper data points. The conclusions may be altered due to new or relevant information. Because I felt the need to use the data in excel to get a better understanding of what took place. There may have been a better way to perform these actions in SQL, merging data is common in excel and in mysql using the tables and thier fields and attributes.

According to the Capstone22 Database, one noticeable trend  to the data is the high percentage of returns in contrast to the total purchases throughout the United States. In addition, there seems to be an increase of items purchased and returned for the state of Massachusetts alone, nearly doubling that of any other state. When reviewing the data, there seems to be gaps where the product descriptions do not align with the product sku. Lastly, when reporting on the reason as to why items were returned. There is no clear definition to the cause and if it was rectified by replacing the item with the same product or a different product to meet the customers’ demands. If there are concerns to the high percentage of returns, an additional investigation maybe required to determine possible trends that stem from manufacturing problems, shipping delays or damage, and suspicions fraud. While the information presented defines areas of concern. There may be other areas to further investigate as the methods to analyze the data are limited.
